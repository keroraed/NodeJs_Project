import ApiError from "../errors/ApiError.js";const validate = (schema) => {  return (req, res, next) => {    const errors = [];    for (const key of ["body", "params", "query"]) {      if (schema[key]) {        const { error, value } = schema[key].validate(req[key], {          abortEarly: false,          stripUnknown: true,        });        if (error) {          const fieldErrors = error.details.map((detail) => ({            field: detail.path.join("."),            message: detail.message.replace(/"/g, ""),          }));          errors.push(...fieldErrors);        } else {          // Replace req[key] with validated & sanitized value          req[key] = value;        }      }    }    if (errors.length > 0) {      return next(ApiError.badRequest("Validation Error", errors));    }    next();  };};export default validate;